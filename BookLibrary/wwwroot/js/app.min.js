(app=app||{}).Book=Backbone.Model.extend({defaults:{coverImage:"images/placeholder.png",title:"No title",author:"Unknown",releaseDate:"Unknown",keywords:"None"},idAttribute:"_id"});var app=app||{},baseUrl=document.location.origin,appPath=document.location.pathname,index=-1;appPath.endsWith(".html")&&(index=appPath.lastIndexOf("/"),appPath=appPath.substr(0,index+1)),appPath.endsWith("/")||(appPath+="/"),baseUrl+=appPath,app.Library=Backbone.Collection.extend({model:app.Book,url:baseUrl+"api/books"}),(app=app||{}).BookView=Backbone.View.extend({tagName:"div",className:"bookContainer",template:$("#bookTemplate").html(),events:{"click .delete":"deleteBook"},render:function(){var e=_.template(this.template);return this.$el.html(e(this.model.toJSON())),this},deleteBook:function(){this.model.destroy(),this.remove()}}),(app=app||{}).LibraryView=Backbone.View.extend({el:"#books",initialize:function(e){this.collection=new app.Library(e),this.collection.fetch({reset:!0}),this.render(),this.listenTo(this.collection,"add",this.renderBook),this.listenTo(this.collection,"reset",this.render)},events:{"click #add":"addBook"},render:function(){this.collection.each(function(e){this.renderBook(e)},this)},renderBook:function(e){var t=new app.BookView({model:e});this.$el.append(t.render().el)},addBook:function(e){e.preventDefault();var a={};$("#addBook div").children("input").each(function(e,t){""!=$(t).val()&&("keywords"===t.id?(a[t.id]=[],_.each($(t).val().split(" "),function(e){a[t.id].push({keyword:e})})):"releaseDate"===t.id?a[t.id]=$("#releaseDate").datepicker("getDate").getTime():a[t.id]=$(t).val()),$(t).val("")}),this.collection.create(a)}});app=app||{};$(function(){$("#releaseDate").datepicker(),new app.LibraryView});
//# sourceMappingURL=app.min.js.map
